function K(t){return t=t||[],Array.isArray(t)?t:[t]}function v(t){return`[Vaadin.Router] ${t}`}function ht(t){if(typeof t!="object")return String(t);let e=Object.prototype.toString.call(t).match(/ (.*)\]$/)[1];return e==="Object"||e==="Array"?`${e} ${JSON.stringify(t)}`:e}var J="module",X="nomodule",ae=[J,X];function be(t){if(!t.match(/.+\.[m]?js$/))throw new Error(v(`Unsupported type for bundle "${t}": .js or .mjs expected.`))}function ye(t){if(!t||!b(t.path))throw new Error(v('Expected route config to be an object with a "path" string property, or an array of such objects'));let e=t.bundle,n=["component","redirect","bundle"];if(!j(t.action)&&!Array.isArray(t.children)&&!j(t.children)&&!Q(e)&&!n.some(r=>b(t[r])))throw new Error(v(`Expected route config "${t.path}" to include either "${n.join('", "')}" or "action" function but none found.`));if(e)if(b(e))be(e);else if(ae.some(r=>r in e))ae.forEach(r=>r in e&&be(e[r]));else throw new Error(v('Expected route bundle to include either "'+X+'" or "'+J+'" keys, or both'));t.redirect&&["bundle","component"].forEach(r=>{r in t&&console.warn(v(`Route config "${t.path}" has both "redirect" and "${r}" properties, and "redirect" will always override the latter. Did you mean to only use "${r}"?`))})}function we(t){K(t).forEach(e=>ye(e))}function Ee(t,e){let n=document.head.querySelector('script[src="'+t+'"][async]');return n||(n=document.createElement("script"),n.setAttribute("src",t),e===J?n.setAttribute("type",J):e===X&&n.setAttribute(X,""),n.async=!0),new Promise((r,o)=>{n.onreadystatechange=n.onload=i=>{n.__dynamicImportLoaded=!0,r(i)},n.onerror=i=>{n.parentNode&&n.parentNode.removeChild(n),o(i)},n.parentNode===null?document.head.appendChild(n):n.__dynamicImportLoaded&&r()})}function dt(t){return b(t)?Ee(t):Promise.race(ae.filter(e=>e in t).map(e=>Ee(t[e],e)))}function D(t,e){return!window.dispatchEvent(new CustomEvent(`vaadin-router-${t}`,{cancelable:t==="go",detail:e}))}function Q(t){return typeof t=="object"&&!!t}function j(t){return typeof t=="function"}function b(t){return typeof t=="string"}function Re(t){let e=new Error(v(`Page not found (${t.pathname})`));return e.context=t,e.code=404,e}var I=new class{};function ft(t){let e=t.port,n=t.protocol,i=n==="http:"&&e==="80"||n==="https:"&&e==="443"?t.hostname:t.host;return`${n}//${i}`}function $e(t){if(t.defaultPrevented||t.button!==0||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)return;let e=t.target,n=t.composedPath?t.composedPath():t.path||[];for(let l=0;l<n.length;l++){let s=n[l];if(s.nodeName&&s.nodeName.toLowerCase()==="a"){e=s;break}}for(;e&&e.nodeName.toLowerCase()!=="a";)e=e.parentNode;if(!e||e.nodeName.toLowerCase()!=="a"||e.target&&e.target.toLowerCase()!=="_self"||e.hasAttribute("download")||e.hasAttribute("router-ignore")||e.pathname===window.location.pathname&&e.hash!==""||(e.origin||ft(e))!==window.location.origin)return;let{pathname:o,search:i,hash:c}=e;D("go",{pathname:o,search:i,hash:c})&&(t.preventDefault(),t&&t.type==="click"&&window.scrollTo(0,0))}var pt={activate(){window.document.addEventListener("click",$e)},inactivate(){window.document.removeEventListener("click",$e)}},gt=/Trident/.test(navigator.userAgent);gt&&!j(window.PopStateEvent)&&(window.PopStateEvent=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n.state=e.state||null,n},window.PopStateEvent.prototype=window.Event.prototype);function Ae(t){if(t.state==="vaadin-router-ignore")return;let{pathname:e,search:n,hash:r}=window.location;D("go",{pathname:e,search:n,hash:r})}var _t={activate(){window.addEventListener("popstate",Ae)},inactivate(){window.removeEventListener("popstate",Ae)}},H=Ce,mt=ce,bt=vt,yt=Oe,wt=Pe,Se="/",Le="./",Et=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function ce(t,e){for(var n=[],r=0,o=0,i="",c=e&&e.delimiter||Se,l=e&&e.delimiters||Le,s=!1,a;(a=Et.exec(t))!==null;){var u=a[0],h=a[1],d=a.index;if(i+=t.slice(o,d),o=d+u.length,h){i+=h[1],s=!0;continue}var f="",P=t[o],w=a[2],N=a[3],B=a[4],R=a[5];if(!s&&i.length){var M=i.length-1;l.indexOf(i[M])>-1&&(f=i[M],i=i.slice(0,M))}i&&(n.push(i),i="",s=!1);var oe=f!==""&&P!==void 0&&P!==f,S=R==="+"||R==="*",L=R==="?"||R==="*",F=f||c,p=N||B;n.push({name:w||r++,prefix:f,delimiter:F,optional:L,repeat:S,partial:oe,pattern:p?Rt(p):"[^"+O(F)+"]+?"})}return(i||o<t.length)&&n.push(i+t.substr(o)),n}function vt(t,e){return Oe(ce(t,e))}function Oe(t){for(var e=new Array(t.length),n=0;n<t.length;n++)typeof t[n]=="object"&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(r,o){for(var i="",c=o&&o.encode||encodeURIComponent,l=0;l<t.length;l++){var s=t[l];if(typeof s=="string"){i+=s;continue}var a=r?r[s.name]:void 0,u;if(Array.isArray(a)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but got array');if(a.length===0){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var h=0;h<a.length;h++){if(u=c(a[h],s),!e[l].test(u))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'"');i+=(h===0?s.prefix:s.delimiter)+u}continue}if(typeof a=="string"||typeof a=="number"||typeof a=="boolean"){if(u=c(String(a),s),!e[l].test(u))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+u+'"');i+=s.prefix+u;continue}if(s.optional){s.partial&&(i+=s.prefix);continue}throw new TypeError('Expected "'+s.name+'" to be '+(s.repeat?"an array":"a string"))}return i}}function O(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Rt(t){return t.replace(/([=!:$/()])/g,"\\$1")}function je(t){return t&&t.sensitive?"":"i"}function $t(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}function At(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(Ce(t[o],e,n).source);return new RegExp("(?:"+r.join("|")+")",je(n))}function Ct(t,e,n){return Pe(ce(t,n),e,n)}function Pe(t,e,n){n=n||{};for(var r=n.strict,o=n.start!==!1,i=n.end!==!1,c=O(n.delimiter||Se),l=n.delimiters||Le,s=[].concat(n.endsWith||[]).map(O).concat("$").join("|"),a=o?"^":"",u=t.length===0,h=0;h<t.length;h++){var d=t[h];if(typeof d=="string")a+=O(d),u=h===t.length-1&&l.indexOf(d[d.length-1])>-1;else{var f=d.repeat?"(?:"+d.pattern+")(?:"+O(d.delimiter)+"(?:"+d.pattern+"))*":d.pattern;e&&e.push(d),d.optional?d.partial?a+=O(d.prefix)+"("+f+")?":a+="(?:"+O(d.prefix)+"("+f+"))?":a+=O(d.prefix)+"("+f+")"}}return i?(r||(a+="(?:"+c+")?"),a+=s==="$"?"$":"(?="+s+")"):(r||(a+="(?:"+c+"(?="+s+"))?"),u||(a+="(?="+c+"|"+s+")")),new RegExp(a,je(n))}function Ce(t,e,n){return t instanceof RegExp?$t(t,e):Array.isArray(t)?At(t,e,n):Ct(t,e,n)}H.parse=mt;H.compile=bt;H.tokensToFunction=yt;H.tokensToRegExp=wt;var{hasOwnProperty:Ot}=Object.prototype,le=new Map;le.set("|false",{keys:[],pattern:/(?:)/});function Te(t){try{return decodeURIComponent(t)}catch(e){return t}}function Pt(t,e,n,r,o){n=!!n;let i=`${t}|${n}`,c=le.get(i);if(!c){let a=[];c={keys:a,pattern:H(t,a,{end:n,strict:t===""})},le.set(i,c)}let l=c.pattern.exec(e);if(!l)return null;let s=Object.assign({},o);for(let a=1;a<l.length;a++){let u=c.keys[a-1],h=u.name,d=l[a];(d!==void 0||!Ot.call(s,h))&&(u.repeat?s[h]=d?d.split(u.delimiter).map(Te):[]:s[h]=d&&Te(d))}return{path:l[0],keys:(r||[]).concat(c.keys),params:s}}function Ne(t,e,n,r,o){let i,c,l=0,s=t.path||"";return s.charAt(0)==="/"&&(n&&(s=s.substr(1)),n=!0),{next(a){if(t===a)return{done:!0};let u=t.__children=t.__children||t.children;if(!i&&(i=Pt(s,e,!u,r,o),i))return{done:!1,value:{route:t,keys:i.keys,params:i.params,path:i.path}};if(i&&u)for(;l<u.length;){if(!c){let d=u[l];d.parent=t;let f=i.path.length;f>0&&e.charAt(f)==="/"&&(f+=1),c=Ne(d,e.substr(f),n,i.keys,i.params)}let h=c.next(a);if(!h.done)return{done:!1,value:h.value};c=null,l++}return{done:!0}}}}function St(t){if(j(t.route.action))return t.route.action(t)}function Lt(t,e){let n=e;for(;n;)if(n=n.parent,n===t)return!0;return!1}function jt(t){let e=`Path '${t.pathname}' is not properly resolved due to an error.`,n=(t.route||{}).path;return n&&(e+=` Resolution had failed on route: '${n}'`),e}function Tt(t,e){let{route:n,path:r}=e;if(n&&!n.__synthetic){let o={path:r,route:n};if(!t.chain)t.chain=[];else if(n.parent){let i=t.chain.length;for(;i--&&t.chain[i].route&&t.chain[i].route!==n.parent;)t.chain.pop()}t.chain.push(o)}}var k=class{constructor(e,n={}){if(Object(e)!==e)throw new TypeError("Invalid routes");this.baseUrl=n.baseUrl||"",this.errorHandler=n.errorHandler,this.resolveRoute=n.resolveRoute||St,this.context=Object.assign({resolver:this},n.context),this.root=Array.isArray(e)?{path:"",__children:e,parent:null,__synthetic:!0}:e,this.root.parent=null}getRoutes(){return[...this.root.__children]}setRoutes(e){we(e);let n=[...K(e)];this.root.__children=n}addRoutes(e){return we(e),this.root.__children.push(...K(e)),this.getRoutes()}removeRoutes(){this.setRoutes([])}resolve(e){let n=Object.assign({},this.context,b(e)?{pathname:e}:e),r=Ne(this.root,this.__normalizePathname(n.pathname),this.baseUrl),o=this.resolveRoute,i=null,c=null,l=n;function s(a,u=i.value.route,h){let d=h===null&&i.value.route;return i=c||r.next(d),c=null,!a&&(i.done||!Lt(u,i.value.route))?(c=i,Promise.resolve(I)):i.done?Promise.reject(Re(n)):(l=Object.assign(l?{chain:l.chain?l.chain.slice(0):[]}:{},n,i.value),Tt(l,i.value),Promise.resolve(o(l)).then(f=>f!=null&&f!==I?(l.result=f.result||f,l):s(a,u,f)))}return n.next=s,Promise.resolve().then(()=>s(!0,this.root)).catch(a=>{let u=jt(l);if(a?console.warn(u):a=new Error(u),a.context=a.context||l,a instanceof DOMException||(a.code=a.code||500),this.errorHandler)return l.result=this.errorHandler(a),l;throw a})}static __createUrl(e,n){return new URL(e,n)}get __effectiveBaseUrl(){return this.baseUrl?this.constructor.__createUrl(this.baseUrl,document.baseURI||document.URL).href.replace(/[^\/]*$/,""):""}__normalizePathname(e){if(!this.baseUrl)return e;let n=this.__effectiveBaseUrl,r=this.constructor.__createUrl(e,n).href;if(r.slice(0,n.length)===n)return r.slice(n.length)}};k.pathToRegexp=H;var{pathToRegexp:Me}=k,Ie=new Map;function He(t,e,n){let r=e.name||e.component;if(r&&(t.has(r)?t.get(r).push(e):t.set(r,[e])),Array.isArray(n))for(let o=0;o<n.length;o++){let i=n[o];i.parent=e,He(t,i,i.__children||i.children)}}function ke(t,e){let n=t.get(e);if(n&&n.length>1)throw new Error(`Duplicate route with name "${e}". Try seting unique 'name' route properties.`);return n&&n[0]}function Ue(t){let e=t.path;return e=Array.isArray(e)?e[0]:e,e!==void 0?e:""}function Nt(t,e={}){if(!(t instanceof k))throw new TypeError("An instance of Resolver is expected");let n=new Map;return(r,o)=>{let i=ke(n,r);if(!i&&(n.clear(),He(n,t.root,t.root.__children),i=ke(n,r),!i))throw new Error(`Route "${r}" not found`);let c=Ie.get(i.fullPath);if(!c){let s=Ue(i),a=i.parent;for(;a;){let f=Ue(a);f&&(s=f.replace(/\/$/,"")+"/"+s.replace(/^\//,"")),a=a.parent}let u=Me.parse(s),h=Me.tokensToFunction(u),d=Object.create(null);for(let f=0;f<u.length;f++)b(u[f])||(d[u[f].name]=!0);c={toPath:h,keys:d},Ie.set(s,c),i.fullPath=s}let l=c.toPath(o,e)||"/";if(e.stringifyQueryParams&&o){let s={},a=Object.keys(o);for(let h=0;h<a.length;h++){let d=a[h];c.keys[d]||(s[d]=o[d])}let u=e.stringifyQueryParams(s);u&&(l+=u.charAt(0)==="?"?u:`?${u}`)}return l}}var Be=[];function Mt(t){Be.forEach(e=>e.inactivate()),t.forEach(e=>e.activate()),Be=t}var It=t=>{let e=getComputedStyle(t).getPropertyValue("animation-name");return e&&e!=="none"},Ht=(t,e)=>{let n=()=>{t.removeEventListener("animationend",n),e()};t.addEventListener("animationend",n)};function Fe(t,e){return t.classList.add(e),new Promise(n=>{if(It(t)){let r=t.getBoundingClientRect(),o=`height: ${r.bottom-r.top}px; width: ${r.right-r.left}px`;t.setAttribute("style",`position: absolute; ${o}`),Ht(t,()=>{t.classList.remove(e),t.removeAttribute("style"),n()})}else t.classList.remove(e),n()})}var kt=256;function ue(t){return t!=null}function Ut(t){let e=Object.assign({},t);return delete e.next,e}function y({pathname:t="",search:e="",hash:n="",chain:r=[],params:o={},redirectFrom:i,resolver:c},l){let s=r.map(a=>a.route);return{baseUrl:c&&c.baseUrl||"",pathname:t,search:e,hash:n,routes:s,route:l||s.length&&s[s.length-1]||null,params:o,redirectFrom:i,getUrl:(a={})=>Y(E.pathToRegexp.compile(De(s))(Object.assign({},o,a)),c)}}function xe(t,e){let n=Object.assign({},t.params);return{redirect:{pathname:e,from:t.pathname,params:n}}}function Bt(t,e){e.location=y(t);let n=t.chain.map(r=>r.route).indexOf(t.route);return t.chain[n].element=e,e}function Z(t,e,n){if(j(t))return t.apply(n,e)}function We(t,e,n){return r=>{if(r&&(r.cancel||r.redirect))return r;if(n)return Z(n[t],e,n)}}function Ft(t,e){if(!Array.isArray(t)&&!Q(t))throw new Error(v(`Incorrect "children" value for the route ${e.path}: expected array or object, but got ${t}`));e.__children=[];let n=K(t);for(let r=0;r<n.length;r++)ye(n[r]),e.__children.push(n[r])}function V(t){if(t&&t.length){let e=t[0].parentNode;for(let n=0;n<t.length;n++)e.removeChild(t[n])}}function Y(t,e){let n=e.__effectiveBaseUrl;return n?e.constructor.__createUrl(t.replace(/^\//,""),n).pathname:t}function De(t){return t.map(e=>e.path).reduce((e,n)=>n.length?e.replace(/\/$/,"")+"/"+n.replace(/^\//,""):e,"")}var E=class extends k{constructor(e,n){let r=document.head.querySelector("base"),o=r&&r.getAttribute("href");super([],Object.assign({baseUrl:o&&k.__createUrl(o,document.URL).pathname.replace(/[^\/]*$/,"")},n));this.resolveRoute=c=>this.__resolveRoute(c);let i=E.NavigationTrigger;E.setTriggers.apply(E,Object.keys(i).map(c=>i[c])),this.baseUrl,this.ready,this.ready=Promise.resolve(e),this.location,this.location=y({resolver:this}),this.__lastStartedRenderId=0,this.__navigationEventHandler=this.__onNavigationEvent.bind(this),this.setOutlet(e),this.subscribe(),this.__createdByRouter=new WeakMap,this.__addedByRouter=new WeakMap}__resolveRoute(e){let n=e.route,r=Promise.resolve();j(n.children)&&(r=r.then(()=>n.children(Ut(e))).then(i=>{!ue(i)&&!j(n.children)&&(i=n.children),Ft(i,n)}));let o={redirect:i=>xe(e,i),component:i=>{let c=document.createElement(i);return this.__createdByRouter.set(c,!0),c}};return r.then(()=>{if(this.__isLatestRender(e))return Z(n.action,[e,o],n)}).then(i=>{if(ue(i)&&(i instanceof HTMLElement||i.redirect||i===I))return i;if(b(n.redirect))return o.redirect(n.redirect);if(n.bundle)return dt(n.bundle).then(()=>{},()=>{throw new Error(v(`Bundle not found: ${n.bundle}. Check if the file name is correct`))})}).then(i=>{if(ue(i))return i;if(b(n.component))return o.component(n.component)})}setOutlet(e){e&&this.__ensureOutlet(e),this.__outlet=e}getOutlet(){return this.__outlet}setRoutes(e,n=!1){return this.__previousContext=void 0,this.__urlForName=void 0,super.setRoutes(e),n||this.__onNavigationEvent(),this.ready}render(e,n){let r=++this.__lastStartedRenderId,o=Object.assign({search:"",hash:""},b(e)?{pathname:e}:e,{__renderId:r});return this.ready=this.resolve(o).then(i=>this.__fullyResolveChain(i)).then(i=>{if(this.__isLatestRender(i)){let c=this.__previousContext;if(i===c)return this.__updateBrowserHistory(c,!0),this.location;if(this.location=y(i),n&&this.__updateBrowserHistory(i,r===1),D("location-changed",{router:this,location:this.location}),i.__skipAttach)return this.__copyUnchangedElements(i,c),this.__previousContext=i,this.location;this.__addAppearingContent(i,c);let l=this.__animateIfNeeded(i);return this.__runOnAfterEnterCallbacks(i),this.__runOnAfterLeaveCallbacks(i,c),l.then(()=>{if(this.__isLatestRender(i))return this.__removeDisappearingContent(),this.__previousContext=i,this.location})}}).catch(i=>{if(r===this.__lastStartedRenderId)throw n&&this.__updateBrowserHistory(o),V(this.__outlet&&this.__outlet.children),this.location=y(Object.assign(o,{resolver:this})),D("error",Object.assign({router:this,error:i},o)),i}),this.ready}__fullyResolveChain(e,n=e){return this.__findComponentContextAfterAllRedirects(n).then(r=>{let i=r!==n?r:e,l=Y(De(r.chain),r.resolver)===r.pathname,s=(a,u=a.route,h)=>a.next(void 0,u,h).then(d=>d===null||d===I?l?a:u.parent!==null?s(a,u.parent,d):d:d);return s(r).then(a=>{if(a===null||a===I)throw Re(i);return a&&a!==I&&a!==r?this.__fullyResolveChain(i,a):this.__amendWithOnBeforeCallbacks(r)})})}__findComponentContextAfterAllRedirects(e){let n=e.result;return n instanceof HTMLElement?(Bt(e,n),Promise.resolve(e)):n.redirect?this.__redirect(n.redirect,e.__redirectCount,e.__renderId).then(r=>this.__findComponentContextAfterAllRedirects(r)):n instanceof Error?Promise.reject(n):Promise.reject(new Error(v(`Invalid route resolution result for path "${e.pathname}". Expected redirect object or HTML element, but got: "${ht(n)}". Double check the action return value for the route.`)))}__amendWithOnBeforeCallbacks(e){return this.__runOnBeforeCallbacks(e).then(n=>n===this.__previousContext||n===e?n:this.__fullyResolveChain(n))}__runOnBeforeCallbacks(e){let n=this.__previousContext||{},r=n.chain||[],o=e.chain,i=Promise.resolve(),c=()=>({cancel:!0}),l=s=>xe(e,s);if(e.__divergedChainIndex=0,e.__skipAttach=!1,r.length){for(let s=0;s<Math.min(r.length,o.length)&&!(r[s].route!==o[s].route||r[s].path!==o[s].path&&r[s].element!==o[s].element||!this.__isReusableElement(r[s].element,o[s].element));s=++e.__divergedChainIndex);if(e.__skipAttach=o.length===r.length&&e.__divergedChainIndex==o.length&&this.__isReusableElement(e.result,n.result),e.__skipAttach){for(let s=o.length-1;s>=0;s--)i=this.__runOnBeforeLeaveCallbacks(i,e,{prevent:c},r[s]);for(let s=0;s<o.length;s++)i=this.__runOnBeforeEnterCallbacks(i,e,{prevent:c,redirect:l},o[s]),r[s].element.location=y(e,r[s].route)}else for(let s=r.length-1;s>=e.__divergedChainIndex;s--)i=this.__runOnBeforeLeaveCallbacks(i,e,{prevent:c},r[s])}if(!e.__skipAttach)for(let s=0;s<o.length;s++)s<e.__divergedChainIndex?s<r.length&&r[s].element&&(r[s].element.location=y(e,r[s].route)):(i=this.__runOnBeforeEnterCallbacks(i,e,{prevent:c,redirect:l},o[s]),o[s].element&&(o[s].element.location=y(e,o[s].route)));return i.then(s=>{if(s){if(s.cancel)return this.__previousContext.__renderId=e.__renderId,this.__previousContext;if(s.redirect)return this.__redirect(s.redirect,e.__redirectCount,e.__renderId)}return e})}__runOnBeforeLeaveCallbacks(e,n,r,o){let i=y(n);return e.then(c=>{if(this.__isLatestRender(n))return We("onBeforeLeave",[i,r,this],o.element)(c)}).then(c=>{if(!(c||{}).redirect)return c})}__runOnBeforeEnterCallbacks(e,n,r,o){let i=y(n,o.route);return e.then(c=>{if(this.__isLatestRender(n))return We("onBeforeEnter",[i,r,this],o.element)(c)})}__isReusableElement(e,n){return e&&n?this.__createdByRouter.get(e)&&this.__createdByRouter.get(n)?e.localName===n.localName:e===n:!1}__isLatestRender(e){return e.__renderId===this.__lastStartedRenderId}__redirect(e,n,r){if(n>kt)throw new Error(v(`Too many redirects when rendering ${e.from}`));return this.resolve({pathname:this.urlForPath(e.pathname,e.params),redirectFrom:e.from,__redirectCount:(n||0)+1,__renderId:r})}__ensureOutlet(e=this.__outlet){if(!(e instanceof Node))throw new TypeError(v(`Expected router outlet to be a valid DOM Node (but got ${e})`))}__updateBrowserHistory({pathname:e,search:n="",hash:r=""},o){if(window.location.pathname!==e||window.location.search!==n||window.location.hash!==r){let i=o?"replaceState":"pushState";window.history[i](null,document.title,e+n+r),window.dispatchEvent(new PopStateEvent("popstate",{state:"vaadin-router-ignore"}))}}__copyUnchangedElements(e,n){let r=this.__outlet;for(let o=0;o<e.__divergedChainIndex;o++){let i=n&&n.chain[o].element;if(i)if(i.parentNode===r)e.chain[o].element=i,r=i;else break}return r}__addAppearingContent(e,n){this.__ensureOutlet(),this.__removeAppearingContent();let r=this.__copyUnchangedElements(e,n);this.__appearingContent=[],this.__disappearingContent=Array.from(r.children).filter(i=>this.__addedByRouter.get(i)&&i!==e.result);let o=r;for(let i=e.__divergedChainIndex;i<e.chain.length;i++){let c=e.chain[i].element;c&&(o.appendChild(c),this.__addedByRouter.set(c,!0),o===r&&this.__appearingContent.push(c),o=c)}}__removeDisappearingContent(){this.__disappearingContent&&V(this.__disappearingContent),this.__disappearingContent=null,this.__appearingContent=null}__removeAppearingContent(){this.__disappearingContent&&this.__appearingContent&&(V(this.__appearingContent),this.__disappearingContent=null,this.__appearingContent=null)}__runOnAfterLeaveCallbacks(e,n){if(!!n)for(let r=n.chain.length-1;r>=e.__divergedChainIndex&&this.__isLatestRender(e);r--){let o=n.chain[r].element;if(!!o)try{let i=y(e);Z(o.onAfterLeave,[i,{},n.resolver],o)}finally{this.__disappearingContent.indexOf(o)>-1&&V(o.children)}}}__runOnAfterEnterCallbacks(e){for(let n=e.__divergedChainIndex;n<e.chain.length&&this.__isLatestRender(e);n++){let r=e.chain[n].element||{},o=y(e,e.chain[n].route);Z(r.onAfterEnter,[o,{},e.resolver],r)}}__animateIfNeeded(e){let n=(this.__disappearingContent||[])[0],r=(this.__appearingContent||[])[0],o=[],i=e.chain,c;for(let l=i.length;l>0;l--)if(i[l-1].route.animate){c=i[l-1].route.animate;break}if(n&&r&&c){let l=Q(c)&&c.leave||"leaving",s=Q(c)&&c.enter||"entering";o.push(Fe(n,l)),o.push(Fe(r,s))}return Promise.all(o).then(()=>e)}subscribe(){window.addEventListener("vaadin-router-go",this.__navigationEventHandler)}unsubscribe(){window.removeEventListener("vaadin-router-go",this.__navigationEventHandler)}__onNavigationEvent(e){let{pathname:n,search:r,hash:o}=e?e.detail:window.location;b(this.__normalizePathname(n))&&(e&&e.preventDefault&&e.preventDefault(),this.render({pathname:n,search:r,hash:o},!0))}static setTriggers(...e){Mt(e)}urlForName(e,n){return this.__urlForName||(this.__urlForName=Nt(this)),Y(this.__urlForName(e,n),this)}urlForPath(e,n){return Y(E.pathToRegexp.compile(e)(n),this)}static go(e){let{pathname:n,search:r,hash:o}=b(e)?this.__createUrl(e,"http://a"):e;return D("go",{pathname:n,search:r,hash:o})}},Dt=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,ee=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function xt(){function t(){return!0}return qe(t)}function Gt(){try{return Wt()?!0:qt()?ee?!zt():!xt():!1}catch(t){return!1}}function Wt(){return localStorage.getItem("vaadin.developmentmode.force")}function qt(){return["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0}function zt(){return!!(ee&&Object.keys(ee).map(e=>ee[e]).filter(e=>e.productionMode).length>0)}function qe(t,e){if(typeof t!="function")return;let n=Dt.exec(t.toString());if(n)try{t=new Function(n[1])}catch(r){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",r)}return t(e)}window.Vaadin=window.Vaadin||{};var ze=function(t,e){if(window.Vaadin.developmentMode)return qe(t,e)};window.Vaadin.developmentMode===void 0&&(window.Vaadin.developmentMode=Gt());function Kt(){}var Jt=function(){if(typeof ze=="function")return ze(Kt)};window.Vaadin=window.Vaadin||{};window.Vaadin.registrations=window.Vaadin.registrations||[];window.Vaadin.registrations.push({is:"@vaadin/router",version:"1.7.4"});Jt();E.NavigationTrigger={POPSTATE:_t,CLICK:pt};var te=t=>({get:e=>t.get(e),set:(e,n)=>(t.set(e,n),n)}),Ge=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,Xt=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,Qt=/<[a-z][^>]+$/i,Yt=/>[^<>]*$/,Zt=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/>)/ig,Vt=/\s+$/,Ke=(t,e)=>0<e--&&(Qt.test(t[e])||!Yt.test(t[e])&&Ke(t,e)),en=(t,e,n)=>Xt.test(e)?t:`<${e}${n.replace(Vt,"")}></${e}>`,tn=(t,e,n)=>{let r=[],{length:o}=t;for(let c=1;c<o;c++){let l=t[c-1];r.push(Ge.test(l)&&Ke(t,c)?l.replace(Ge,(s,a,u)=>`${e}${c-1}=${u||'"'}${a}${u?"":'"'}`):`${l}<!--${e}${c-1}-->`)}r.push(t[o-1]);let i=r.join("").trim();return n?i:i.replace(Zt,en)},{isArray:he}=Array,{indexOf:nn,slice:Je}=[],rn=1,Xe=111,on=({firstChild:t,lastChild:e})=>{let n=document.createRange();return n.setStartAfter(t),n.setEndAfter(e),n.deleteContents(),t},sn=(t,e)=>t.nodeType===Xe?1/e<0?e?on(t):t.lastChild:e?t.valueOf():t.firstChild:t,an=t=>{let{childNodes:e}=t,{length:n}=e;if(n<2)return n?e[0]:t;let r=Je.call(e,0),o=r[0],i=r[n-1];return{ELEMENT_NODE:rn,nodeType:Xe,firstChild:o,lastChild:i,valueOf(){if(e.length!==n){let c=0;for(;c<n;)t.appendChild(r[c++])}return t}}},cn=(t,e,n,r,o)=>{let i=n.length,c=e.length,l=i,s=0,a=0,u=null;for(;s<c||a<l;)if(c===s){let h=l<i?a?r(n[a-1],-0).nextSibling:r(n[l-a],0):o;for(;a<l;)t.insertBefore(r(n[a++],1),h)}else if(l===a)for(;s<c;)(!u||!u.has(e[s]))&&t.removeChild(r(e[s],-1)),s++;else if(e[s]===n[a])s++,a++;else if(e[c-1]===n[l-1])c--,l--;else if(e[s]===n[l-1]&&n[a]===e[c-1]){let h=r(e[--c],-1).nextSibling;t.insertBefore(r(n[a++],1),r(e[s++],-1).nextSibling),t.insertBefore(r(n[--l],1),h),e[c]=n[l]}else{if(!u){u=new Map;let h=a;for(;h<l;)u.set(n[h],h++)}if(u.has(e[s])){let h=u.get(e[s]);if(a<h&&h<l){let d=s,f=1;for(;++d<c&&d<l&&u.get(e[d])===h+f;)f++;if(f>h-a){let P=r(e[s],0);for(;a<h;)t.insertBefore(r(n[a++],1),P)}else t.replaceChild(r(n[a++],1),r(e[s++],-1))}else s++}else t.removeChild(r(e[s++],-1))}return n},ln=t=>e=>{for(let n in e){let r=n==="role"?n:`aria-${n}`,o=e[n];o==null?t.removeAttribute(r):t.setAttribute(r,o)}},un=(t,e)=>{let n,r=!0,o=document.createAttributeNS(null,e);return i=>{n!==i&&(n=i,n==null?r||(t.removeAttributeNode(o),r=!0):(o.value=i,r&&(t.setAttributeNodeNS(o),r=!1)))}},hn=(t,e,n)=>r=>{n!==!!r&&((n=!!r)?t.setAttribute(e,""):t.removeAttribute(e))},dn=({dataset:t})=>e=>{for(let n in e){let r=e[n];r==null?delete t[n]:t[n]=r}},Qe=(t,e)=>{let n,r=e.slice(2);return!(e in t)&&e.toLowerCase()in t&&(r=r.toLowerCase()),o=>{let i=he(o)?o:[o,!1];n!==i[0]&&(n&&t.removeEventListener(r,n,i[1]),(n=i[0])&&t.addEventListener(r,n,i[1]))}},fn=t=>{let e;return n=>{e!==n&&(e=n,typeof n=="function"?n(t):n.current=t)}},pn=(t,e)=>e==="dataset"?dn(t):n=>{t[e]=n},gn=t=>{let e;return n=>{e!=n&&(e=n,t.textContent=n==null?"":n)}},_n=({childNodes:t},e)=>t[e],x=(t,e,n)=>cn(t.parentNode,e,n,sn,t),mn=t=>{let e,n,r=[],o=i=>{switch(typeof i){case"string":case"number":case"boolean":e!==i&&(e=i,n||(n=document.createTextNode("")),n.data=i,r=x(t,r,[n]));break;case"object":case"undefined":if(i==null){e!=i&&(e=i,r=x(t,r,[]));break}if(he(i)){e=i,i.length===0?r=x(t,r,[]):typeof i[0]=="object"?r=x(t,r,i):o(String(i));break}e!==i&&"ELEMENT_NODE"in i&&(e=i,r=x(t,r,i.nodeType===11?Je.call(i.childNodes):[i]));break;case"function":o(i(t));break}};return o},vn=(t,e)=>{switch(e[0]){case"?":return hn(t,e.slice(1),!1);case".":return pn(t,e.slice(1));case"@":return Qe(t,"on"+e.slice(1));case"o":if(e[1]==="n")return Qe(t,e)}switch(e){case"ref":return fn(t);case"aria":return ln(t)}return un(t,e)};function bn(t){let{type:e,path:n}=t,r=n.reduceRight(_n,this);return e==="node"?mn(r):e==="attr"?vn(r,t.name):gn(r)}var Ye=function(t){var e="fragment",n="template",r="content"in c(n),o=r?function(s){var a=c(n);return a.innerHTML=s,a.content}:function(s){var a=c(e),u=c(n),h=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(s)){var d=RegExp.$1;u.innerHTML="<table>"+s+"</table>",h=u.querySelectorAll(d)}else u.innerHTML=s,h=u.childNodes;return i(a,h),a};return function(a,u){return(u==="svg"?l:o)(a)};function i(s,a){for(var u=a.length;u--;)s.appendChild(a[0])}function c(s){return s===e?t.createDocumentFragment():t.createElementNS("http://www.w3.org/1999/xhtml",s)}function l(s){var a=c(e),u=c("div");return u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+s+"</svg>",i(a,u.firstChild.childNodes),a}}(document),Ze=document.importNode.length!=1,yn=Ze?(t,e,n)=>document.importNode(Ye(t,e,n),!0):Ye,wn=Ze?t=>document.createTreeWalker(t,1|128,null,!1):t=>document.createTreeWalker(t,1|128),de=t=>{let e=[],{parentNode:n}=t;for(;n;)e.push(nn.call(n.childNodes,t)),t=n,n=t.parentNode;return e},W="isµ",Ve=te(new WeakMap),En=/^(?:plaintext|script|style|textarea|title|xmp)$/i,q=()=>({stack:[],entry:null,wire:null}),$n=(t,e)=>{let{content:n,updates:r}=Rn(t,e);return{type:t,template:e,content:n,updates:r,wire:null}},An=(t,e)=>{let n=tn(e,W,t==="svg"),r=yn(n,t),o=wn(r),i=[],c=e.length-1,l=0,s=`${W}${l}`;for(;l<c;){let a=o.nextNode();if(!a)throw`bad template: ${n}`;if(a.nodeType===8)a.data===s&&(i.push({type:"node",path:de(a)}),s=`${W}${++l}`);else{for(;a.hasAttribute(s);)i.push({type:"attr",path:de(a),name:a.getAttribute(s)}),a.removeAttribute(s),s=`${W}${++l}`;En.test(a.tagName)&&a.textContent.trim()===`<!--${s}-->`&&(a.textContent="",i.push({type:"text",path:de(a)}),s=`${W}${++l}`)}}return{content:r,nodes:i}},Rn=(t,e)=>{let{content:n,nodes:r}=Ve.get(e)||Ve.set(e,An(t,e)),o=document.importNode(n,!0),i=r.map(bn,o);return{content:o,updates:i}},ne=(t,{type:e,template:n,values:r})=>{let{length:o}=r;et(t,r,o);let{entry:i}=t;(!i||i.template!==n||i.type!==e)&&(t.entry=i=$n(e,n));let{content:c,updates:l,wire:s}=i;for(let a=0;a<o;a++)l[a](r[a]);return s||(i.wire=an(c))},et=({stack:t},e,n)=>{for(let r=0;r<n;r++){let o=e[r];o instanceof fe?e[r]=ne(t[r]||(t[r]=q()),o):he(o)?et(t[r]||(t[r]=q()),o,o.length):t[r]=null}n<t.length&&t.splice(n)};function fe(t,e,n){this.type=t,this.template=e,this.values=n}var{create:Cn,defineProperties:On}=Object,tt=t=>{let e=te(new WeakMap),n=r=>(o,...i)=>ne(r,{type:t,template:o,values:i});return On((r,...o)=>new fe(t,r,o),{for:{value(r,o){let i=e.get(r)||e.set(r,Cn(null));return i[o]||(i[o]=n(q()))}},node:{value:(r,...o)=>ne(q(),{type:t,template:r,values:o}).valueOf()}})},nt=te(new WeakMap),rt=(t,e)=>{let n=typeof e=="function"?e():e,r=nt.get(t)||nt.set(t,q()),o=n instanceof fe?ne(r,n):n;return o!==r.wire&&(r.wire=o,t.textContent="",t.appendChild(o.valueOf())),t},T=tt("html"),Pn=tt("svg");function Sn(t){for(var e=t[0],n=1,r=arguments.length;n<r;n++)e+=arguments[n]+t[n];return e}var{defineProperties:Ln,keys:jn}=Object,Tn=(t,e,n,r,o)=>({configurable:!0,get:()=>r,set(i){(t||i!==r||e&&typeof i=="object"&&i)&&(r=i,n?o.call(this,r):o.call(this))}}),Nn=(t,e,n,r,o,i)=>{let c={},l=o!==it,s=[n,r,l];for(let a=jn(t),u=0;u<a.length;u++){let h=e(t,a[u]),d=l?o(h):[h,o];i&&(d[1]=i),c[a[u]]=Tn.apply(null,s.concat(d))}return c},it=()=>{},Mn=({all:t=!1,shallow:e=!0,useState:n=it,getAttribute:r=(o,i)=>o.getAttribute(i)}={})=>(o,i,c)=>{let s=Nn(i,(a,u)=>{let h=a[u],d=typeof h;return o.hasOwnProperty(u)?(h=o[u],delete o[u]):o.hasAttribute(u)&&(h=r(o,u),d=="number"?h=+h:d=="boolean"&&(h=!/^(?:false|0|)$/.test(h))),h},t,e,n,c);return Ln(o,s)},In=Mn({dom:!0}),re=customElements,{define:Hn}=re,{parse:kn,stringify:Un}=JSON,{create:Bn,defineProperties:pe,getOwnPropertyDescriptor:Fn,keys:ge}=Object,U="element",ot=new WeakMap,_e=te(new Map([[U,{c:HTMLElement,e:U}]])),st=t=>document.createElement(t),at=t=>_e.get(t)||_e.set(t,{c:st(t).constructor,e:t}),z=(t,e)=>{let{attachShadow:n,attributeChanged:r,bound:o,connected:i,disconnected:c,handleEvent:l,init:s,observedAttributes:a,props:u,render:h,style:d}=e,f=new WeakMap,P={},w={},N=[],B=Bn(null),R=(p,_,$)=>{if(!f.has(p)){f.set(p,0),pe(p,{html:{configurable:!0,value:xn.bind(n?p.attachShadow(n):p)}});for(let g=0;g<M;g++){let{type:A,options:m}=N[g];p.addEventListener(A,p,m)}if(o&&o.forEach(Dn,p),u){let g={};for(let A=ge(u),m=0;m<A.length;m++){let C=A[m],se=u[C];g[C]=typeof se=="object"?kn(Un(se)):se}ot.set(p,g),In(p,g,h)}(s||h)&&(s||h).call(p),_&&(p[_]=$)}};for(let p=ge(e),_=0,{length:$}=p;_<$;_++){let g=p[_];if(/^on./.test(g)&&!/Options$/.test(g)){let A=e[g+"Options"]||!1,m=g.toLowerCase(),C=m.slice(2);N.push({type:C,options:A}),B[C]=g,m!==g&&(C=m.slice(2,3)+g.slice(3),B[C]=g,N.push({type:C,options:A}))}switch(g){case"attachShadow":case"constructor":case"observedAttributes":case"style":break;default:w[g]=Fn(e,g)}}let{length:M}=N;if(M&&!l&&(w.handleEvent={value(p){this[B[p.type]](p)}}),u!==null)if(u)for(let p=ge(u),_=0;_<p.length;_++){let $=p[_];w[$]={get(){return R(this),ot.get(this)[$]},set(g){R(this,$,g)}}}else w.props={get(){let p={};for(let{attributes:_}=this,{length:$}=_,g=0;g<$;g++){let{name:A,value:m}=_[g];p[A]=m}return p}};a&&(P.observedAttributes={value:a}),w.attributeChangedCallback={value(){R(this),r&&r.apply(this,arguments)}},w.connectedCallback={value(){R(this),i&&i.call(this)}},c&&(w.disconnectedCallback={value:c});let{c:oe,e:S}=at(e.extends||U);class L extends oe{}pe(L,P),pe(L.prototype,w);let F=[t,L];return S!==U&&F.push({extends:S}),Hn.apply(re,F),_e.set(t,{c:L,e:S}),d&&(document.head.appendChild(st("style")).textContent=d(S===U?t:S+'[is="'+t+'"]')),L};re.get("uce-lib")||re.define("uce-lib",class extends at(U).c{static get define(){return z}static get render(){return rt}static get html(){return T}static get svg(){return Pn}static get css(){return Sn}});function Dn(t){this[t]=this[t].bind(this)}function xn(){return rt(this,T.apply(null,arguments))}var me=["Hello dear palettist!","Ready for some colors?","Maybe some blue today?","Hello, a lovely color you have today!"];function ct(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}z("palettes-list",{render(){let t=localStorage.palettes?JSON.parse(localStorage.palettes):[],e=me[Math.floor(Math.random()*me.length)],n=()=>{location.replace(`/palette/${ct()}`)};this.html`
      <h1>${e}</h1>
      <button onclick=${n} class="button">+</button>
      ${t.length===0?T`
      <p>Hello, welcome to Palettia! Click on the big + to create your first palette.</p>
      `:null}
    `}});var ie=new Map,lt=(t,e)=>{localStorage[t]&&Object.assign(e,JSON.parse(localStorage[t]));let n=Object.assign({save(){localStorage[t]=JSON.stringify(this)}},e);return(ie.has(t)||ie.set(t,n))&&ie.get(t)};var ut=class{constructor(){this.database=this.init()}async init(){return new Promise((e,n)=>{let r=indexedDB.open("handles",1);r.onupgradeneeded=o=>{o.oldVersion===0&&r.result.createObjectStore("handles",{})},r.onerror=()=>n(r.error),r.onblocked=()=>console.log("IndexedDB open database request was blocked"),r.onsuccess=()=>e(r.result)})}async getHandles(){let e=await this.database;return new Promise((n,r)=>{let c=e.transaction(["handles"],"readonly").objectStore("handles").getAll();c.onerror=()=>r(c.error),c.onsuccess=async()=>n(c.result)})}async getByName(e){return(await this.getHandles()).find(r=>e===r.name)}async removeHandle(e){let n=await this.database;await new Promise((r,o)=>{let i=n.transaction(["handles"],"readwrite"),l=i.objectStore("handles").delete(e.name);l.onsuccess=()=>r(!0),l.onerror=()=>o(l.error),i.commit()})}async storeHandle(e){let n=await this.database;(await this.getHandles()).find(o=>e.name===o.name)||await new Promise((o,i)=>{let c=n.transaction(["handles"],"readwrite"),s=c.objectStore("handles").add(e,e.name);s.onsuccess=()=>o(!0),s.onerror=()=>i(s.error),c.commit()})}},ve=new ut;var G;z("palette-edit",{async render(){let t=lt("palette-"+this.location.params.id,{url:null,fileName:null}),e=async()=>{let[o]=await window.showOpenFilePicker({types:[{description:"Images",accept:{"image/*":[".png",".gif",".jpeg",".jpg"]}}],startIn:"pictures",excludeAcceptAllOption:!0,multiple:!1}),i=await o.getFile();t.fileName=i.name,await ve.storeHandle(o),t.save();let c=await o.getFile();G=URL.createObjectURL(c),this.render()},n=async()=>{if(t.fileName){let o=await ve.getByName(t.fileName);await o.requestPermission();let i=await o.getFile();G=URL.createObjectURL(i),this.render()}},r=o=>{let i=o.getContext("2d"),c=document.createElement("img");c.addEventListener("load",()=>{console.log(c),i.drawImage(c,0,0,window.innerWidth,window.innerHeight,0,0,o.width,o.height)}),c.src=G};this.html`
     

      <div class="toolbar">
        ${t.fileName&&!G?T`
        <button onclick=${n}>
          <img src="/images/load.svg" />
        </button>
        `:null}

        <button onclick=${e}>
          <img src="/images/add_photo.svg" />
        </button>
      </div>

      ${G?T`<canvas class="photo" ref=${r} />`:null}
    `}});var Wn=new E(document.body);Wn.setRoutes([{path:"/",component:"palettes-list"},{path:"/palette/:id",component:"palette-edit"},{path:"(.*)",component:"palettes-list"}]);
/*! (c) Andrea Giammarchi - ISC */
//# sourceMappingURL=App.js.map
